---
создал заметку: "21-04-2025"
tags: []
---
### Описание
>**SFINAE (Substitution Failure Is Not An Error)** — это концепция в C++, которая позволяет компилятору игнорировать ошибки при подстановке типов в шаблонных функциях или классах, если подстановка не удалась, и продолжить поиск подходящей перегрузки или специализации. Эта техника используется для реализации **шаблонной метапрограммирования** и для создания гибких и обобщённых библиотек.

### Как это работает:
Когда компилятор пытается подставить типы в шаблонную функцию или класс, если подстановка вызывает ошибку, она не считается ошибкой компиляции. Вместо этого компилятор просто игнорирует этот вариант и продолжает искать другие возможные шаблонные специализации или перегрузки. Это особенно полезно, когда необходимо создать код, который зависит от характеристик типа, таких как наличие определённых методов или операторов.

Пример с использованием SFINAE для проверки, имеет ли тип метод `size()`:
```cpp
#include <iostream>
#include <type_traits>

template <typename T>
auto check_size(T& obj) -> decltype(obj.size(), std::true_type{}) {
    return std::true_type{};
}

template <typename T>
std::false_type check_size(...) {
    return std::false_type{};
}

class WithSize {
public:
    size_t size() const { return 42; }
};

class WithoutSize {};

int main() {
    WithSize w;
    WithoutSize w2;

    std::cout << std::boolalpha;
    std::cout << "Has size? " << (decltype(check_size(w))::value) << '\n';  // true
    std::cout << "Has size? " << (decltype(check_size(w2))::value) << '\n'; // false

    return 0;
}

```
### Важные моменты:
- **SFINAE используется с `decltype`** или другими метапрограммами для проверки типа на наличие специфических характеристик, таких как методы или операторы.
- **Возможности через SFINAE**: можно создавать функции и классы, которые работают только с типами, поддерживающими определённые операции или члены.
### Резюме
>SFINAE позволяет писать более универсальный и адаптируемый код, который будет правильно обрабатывать различные типы и их особенности без лишних ошибок компиляции.