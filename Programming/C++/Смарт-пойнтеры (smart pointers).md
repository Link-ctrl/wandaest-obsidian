---
создал заметку: 21-04-2025
tags:
  - База
  - Плюсы
---
### Описание
**Смарт-пойнтеры** — это **обёртки над обычными указателями**, которые **автоматически управляют временем жизни объектов**.  
Их цель — избежать утечек памяти и других проблем ручного управления `new` / `delete`.

### Главная идея:
Смарт-пойнтер:
- сам **удаляет объект**, когда он больше **не нужен**
- может иметь **уникальную** или **разделённую** (shared) семантику владения

### Какие смарт-пойнтеры есть в C++?
|Название|Семантика владения|Когда использовать|
|---|---|---|
|`std::unique_ptr`|Уникальное владение|по умолчанию, в 99% случаев|
|`std::shared_ptr`|Разделённое владение|когда нужно делить объект между владельцами|
|`std::weak_ptr`|Невладельская ссылка|чтобы избежать циклических ссылок с `shared_ptr`|
### Почему они важны?
Смарт-пойнтеры:
- Предотвращают утечки памяти
- Безопасны при исключениях (RAII)
- Упрощают архитектуру
- Работают с STL

| Смарт-пойнтер | Владение    | Копируемость | Удаляет объект | Когда использовать                     |
| ------------- | ----------- | ------------ | -------------- | -------------------------------------- |
| `unique_ptr`  | Уникальное  | ❌            | ✅              | Всегда, если не нужен share            |
| `shared_ptr`  | Разделённое | ✅            | ✅ (последний)  | Когда объект нужен в нескольких местах |
| `weak_ptr`    | Нет         | ✅            | ❌              | Для избежания циклов shared_ptr        |
### Важно:
- **Не используйте `shared_ptr`, если можно обойтись `unique_ptr`** — он быстрее и проще
- **`make_unique` и `make_shared`** — всегда предпочтительнее ручного `new`
- Смарт-пойнтеры **не панацея** — они управляют временем жизни, но не логикой!

### Резюме
>Смарт-пойнтеры — это **современный стандарт управления ресурсами** в C++:
- `unique_ptr` — по умолчанию
- `shared_ptr` — когда действительно нужно делиться
- `weak_ptr` — для безопасного наблюдения без владения