---
создал заметку: 07-11-2025
tags:
  - Плюсы
---
### Описание
Как реализованы [[Исключения (exceptions)]] под капотом в C++:
1. Когда мы пишем оператор throw, компилятор транслирует его в пару вызовов функций `libstdc++`, которые размещают исключение и начинаются быстрый процесс раскручивания стека вызовом библиотеки `libstdc`.  
      
2. Для каждого catch блока компилятор дописывает некую специальную информацию после тела метода, таблицу исключений, которые метод может отлавливать, а также таблицу очистки (подробнее о таблице очистки будет далее).  
      
3. В процессе раскручивания стека вызывается специальная функция, поставляемая `libstdc++` (называемая "персональной подпрограммой" [personality routine]), которая проверяет каждую функцию в стеке на ошибки, которые она может отлавливать.  
    
4. Если не нашлось никого, кто мог бы отловить эту ошибку, вызывается `std::terminate`.  
5. 
6. Если кто-то все же нашелся, раскрутка запускается снова с вершины стека.  
      
    
7. При повторном проходе по стеку запускается "персональная функция" по очистке ресурсов для каждого метода.  
      
    
8. Подпрограмма проверяет таблицу очистки для текущего метода. Если в ней есть, что очистить, подпрограмма "прыгает" в текущий фрейм стэка и запускает код очистки, который вызывает деструкторы для каждого из объектов, размещенных в текущей области видимости.  
      
    
9. Когда раскрутка натыкается на фрагмент стека, который может обрабатывать исключение, она "прыгает" в блок обработки исключения.  
      
    
10. После окончания обработки исключения, функция очистки вызывается для освобождения памяти, занятой исключением.
### Резюме
==Кратко подведите итоги==.