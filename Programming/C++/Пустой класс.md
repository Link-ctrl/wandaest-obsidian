---
—Å–æ–∑–¥–∞–ª –∑–∞–º–µ—Ç–∫—É: 21-04-2025
tags:
  - –ü–ª—é—Å—ã
---
### –û–ø–∏—Å–∞–Ω–∏–µ
üîπ –û–±—ä–µ–∫—Ç **–ø—É—Å—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 1 –±–∞–π—Ç –ø–∞–º—è—Ç–∏**  
(–º–∏–Ω–∏–º—É–º ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—Ä–æ–≤–Ω–µ–Ω –±–æ–ª—å—à–µ, –Ω–æ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚â• 1 –±–∞–π—Ç**)
### –ü–æ—á–µ–º—É **–Ω–µ 0 –±–∞–π—Ç**, –µ—Å–ª–∏ –∫–ª–∞—Å—Å **–ø—É—Å—Ç–æ–π**?

–ß—Ç–æ–±—ã —É –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –±—ã–ª **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏**.  
–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä **–æ–±—è–∑–∞–Ω** –≤—ã–¥–µ–ª–∏—Ç—å —Ö–æ—Ç—è –±—ã 1 –±–∞–π—Ç, –∏–Ω–∞—á–µ:
```cpp
class A {};
A a1, a2;

if (&a1 == &a2) { /* ??? –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å */ }
```
–ù–µ–ª—å–∑—è, —á—Ç–æ–±—ã –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –∏–º–µ–ª–∏ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∞–¥—Ä–µ—Å** ‚Äî —ç—Ç–æ –Ω–∞—Ä—É—à–∏—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

**–ü—Ä–∏–º–µ—Ä:**
```cpp
class Empty {};

int main() {
    std::cout << sizeof(Empty) << "\n"; // ‚Üí 1
}
```
### –ê —á—Ç–æ –µ—Å–ª–∏ –∫–ª–∞—Å—Å —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π?
```cpp
class V {
    virtual void foo() {}
};
```
–¢–æ–≥–¥–∞ `sizeof(V)` –±—É–¥–µ—Ç **–±–æ–ª—å—à–µ**, –Ω–∞–ø—Ä–∏–º–µ—Ä 8 –±–∞–π—Ç (–Ω–∞ x86_64),  
–ø–æ—Ç–æ–º—É —á—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è **—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ `vtable`**.

|–ö–ª–∞—Å—Å|–†–∞–∑–º–µ—Ä|–ü–æ—á–µ–º—É|
|---|---|---|
|`class A {};`|`1` –±–∞–π—Ç|—á—Ç–æ–±—ã –æ–±—ä–µ–∫—Ç—ã –∏–º–µ–ª–∏ –∞–¥—Ä–µ—Å|
|`class B { virtual void f(); };`|`8` –±–∞–π—Ç (–æ–±—ã—á–Ω–æ)|vptr –Ω–∞ —Ç–∞–±–ª–∏—Ü—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π|
|`class C : public A {};`|`1` –±–∞–π—Ç|–¥–∞–∂–µ –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –ø—É—Å—Ç–æ–π|
### –†–µ–∑—é–º–µ
> **–û–±—ä–µ–∫—Ç –ø—É—Å—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –º–∏–Ω–∏–º—É–º 1 –±–∞–π—Ç** ‚Äî  
> –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –Ω—ë–º **–Ω–µ—Ç –Ω–∏ –¥–∞–Ω–Ω—ã—Ö, –Ω–∏ –º–µ—Ç–æ–¥–æ–≤** ‚Äî —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å **—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∞–¥—Ä–µ—Å–∞** –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

üìå –≠—Ç–æ –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–Ω—Ü–∏–ø –ø–∞–º—è—Ç–∏ –∏ layout'–∞ –≤ C++.