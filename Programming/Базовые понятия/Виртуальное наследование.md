---
—Å–æ–∑–¥–∞–ª –∑–∞–º–µ—Ç–∫—É: 21-04-2025
tags:
  - –ë–∞–∑–∞
---
### –û–ø–∏—Å–∞–Ω–∏–µ
**–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É:

> üí¨ "–ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤ –Ω–∞—Å–ª–µ–¥—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å,  
> —Ç–æ –ø—É—Å—Ç—å –±—É–¥–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∫–æ–ø–∏—è** —ç—Ç–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ."

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã **–∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** –ø—Ä–∏ **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏**.

### –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç:
```cpp
class A {
public: int x;
};

class B : public A {};    // A ‚Üí B
class C : public A {};    // A ‚Üí C

class D : public B, public C {};  // D —Å–æ–¥–µ—Ä–∂–∏—Ç B –∏ C
```

### –†–µ—à–µ–Ω–∏–µ: **–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ**
```cpp
class B : public virtual A {};
class C : public virtual A {};
class D : public B, public C {};  // –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ `A` –≤ `D`
```
`D` —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç **–æ–¥–Ω—É –æ–±—â—É—é `A`**, –∏ `D::x` –æ–¥–Ω–æ–∑–Ω–∞—á–µ–Ω

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ?
|–°—Ü–µ–Ω–∞—Ä–∏–π|–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ|
|---|---|
|–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ|–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤|
|¬´–†–æ–º–±–æ–≤–∏–¥–Ω–æ–µ¬ª –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ|–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ "–¥–≤–æ–π–Ω–æ–≥–æ A"|
|–û–±—â–∞—è –ª–æ–≥–∏–∫–∞, –Ω–æ —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ|–û–¥–∏–Ω `A` –Ω–∞ –≤—Å—ë –¥–µ—Ä–µ–≤–æ|

### –ë–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏:
```cpp
TA ta;
ta.name = "Alex"; // ‚ùå –û—à–∏–±–∫–∞: –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å (–¥–≤–µ `name`)
```
### –° –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é:
```cpp
TA ta;
ta.name = "Alex"; // ‚úÖ OK, –æ–¥–Ω–∞ `Person`
```
### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:
|–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫|–ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å|
|---|---|
|–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π layout|–û–±—ä–µ–∫—Ç—ã –±–æ–ª—å—à–µ, —Å–ª–æ–∂–Ω–µ–µ –∞–¥—Ä–µ—Å–∞|
|–ú–µ–¥–ª–µ–Ω–Ω–µ–µ –¥–æ—Å—Ç—É–ø –∫ vbase|—á–µ—Ä–µ–∑ —Å–∫—Ä—ã—Ç—ã–π `vptr`|
|–°–ª–æ–∂–Ω–µ–µ –≤ –¥–µ–±–∞–≥–µ|vtable —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω–æ–π|
|–ù–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å POD|–°—Ç—Ä—É–∫—Ç—É—Ä—ã —Å virtual –Ω–µ POD|
### –†–µ–∑—é–º–µ
==> **–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **—É—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞**,  
> –æ—Å–æ–±–µ–Ω–Ω–æ –≤ **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º/—Ä–æ–º–±–æ–≤–∏–¥–Ω–æ–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏**.

üìå –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞:
- –µ—Å—Ç—å **–æ–±—â–∏–π –ø—Ä–µ–¥–æ–∫** –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–µ—Ç–∫–∞—Ö –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- –Ω—É–∂–µ–Ω **–æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞**, –∞ –Ω–µ –∫–æ–ø–∏–∏