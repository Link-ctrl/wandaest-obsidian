---
создал заметку: 2025-04-20
tags:
  - База
---
### Описание
**`Рекурсия - это способ определения множества объектов через само это множество на основе заданных простых базовых случаев.`**

**Рекурсивной** же будет называться **процедура (функция)**, которая вызывает саму себя напрямую или через другие процедуры и функции

Пример рекурсивной процедуры:
```cpp
void Rec(int a) { 
	if (a>0) Rec(a-1); 
	cout << a; 
}
```
![[Pasted image 20250419194554.png]]Все вызвавшиеся процедуры хранятся в памяти, до тех пор пока не закончат свою работу. Количество одновременно работающих процедур называется `глубиной рекурсии`.

## Как работает?
Каждый рекурсивный вызов:
1. Кладёт **новый фрейм** в **стек вызовов**
2. Ждёт результата **вложенного вызова**
3. После возврата — продолжает выполнение

## Какие **ошибки** могут вызвать рекурсивные алгоритмы?
### 1. **Переполнение стека (stack overflow)**
- Стек ограничен (например, 1 МБ на поток).
- Если рекурсия **слишком глубокая** → стек кончается → **сегфолт**.
```cpp
void boom() {
    boom(); // бесконечная рекурсия
}
```
❗ Падает с `Segmentation fault` / `stack overflow`.
### 2. **Бесконечная рекурсия**
- Отсутствует **условие выхода**, или оно некорректное.
```cpp
int f(int x) {
    return f(x + 1); // никогда не останавливается
}
```
### 3. **Слишком медленное выполнение**
- Некоторые рекурсивные алгоритмы **повторяют одни и те же вызовы** снова и снова.
```cpp
int fib(int n) {
    if (n <= 1) return n;
    return fib(n - 1) + fib(n - 2); // ← экспоненциальное время
}
```
`fib(40)` вызовет **миллионы повторов**!
✅ Лучше использовать **мемоизацию** или **итеративную версию**.

### 4. 🧱 **Ломается кэш процессора**
- При глубокой рекурсии постоянно создаются новые стек-фреймы.
- Это **меняет layout** памяти → **хуже работа CPU кэша**.
- Иногда итеративный код быстрее **на порядок**.
### Резюме
- Рекурсия — мощный инструмент для **алгоритмов на деревьях, графах, разбиениях и т.д.**
- Но она **опасна без контроля**: может привести к **Stack Overflow**, **бесконечным вызовам** и **низкой производительности**.