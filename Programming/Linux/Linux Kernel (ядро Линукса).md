---
создал заметку: 14-10-2025
tags:
  - Linux
---
### Описание
Ядро - один из элементов встриваемой Linux-системы, которое отвечает за управление ресурсами и организацию интерфейса с обородуванием.

#### Что делает ядро?
У ядра есть три основные задачи: управление ресурсами, интерфейс с оборудованием и предоставление API, реализующего уровень абстракции, полезный для пользовательских приложений

![[Pasted image 20251014233828.png]]

#### Модули ядра
В дистрибутивах Linux для настольных ПК они испльзуются очень активно, что позволяет загружать нужные драйверы и функции ядра во время выполнения в зависимости от обнаруженного оборудования и требуемой функциональности. Не будь модулей, пришлось бы статически компоноватья с ядром вообще все драйверы и возможности, что сделалр бы его непримемлемо большим.
Встраиваемые ядра, как правило, собирают без модулей. Но есть несколько случаев, когдамодули ядра имеют смысл:
- Если имеются защищенные правом собственности модули - по описанным выше причинам, связанным с лицензированием;
- Чтобы уменьшить время загрузки, отложив на потом загрузку драйверов, без которых можно обойтись на этом этапе;
- Когда потенциально возможных драйверов чересчур и для их статической компоновки потребовалось бы слишком много памяти. Например, если есть интерфейс USB, поддерживающий различные устройства. Это по существу та же причина, по которой модули используются в дистрибутивах для ПК.

#### Компиляция ядра
##### 1) Компиляци образа ядра
Для сборки образа ядра нужно знать, чего ожидает  [[Bootloader (начальный загрузчик)]]:
- *U-boot:* традиционно U-boot требовал наличия файла uImage, но последние версии могут загружать файл zImage с помощью команды bootz;
- *Цели x86:* требуется фай bzImage;
- Большинство прочих загрузчиков: требуется файл zImage;
##### 2) Компиляци деревьев устройств
Следующий шаг - построить дерево устройств или несколько деревьев, если производится многоплатформенная сборка.
##### 3) Компиляция модулей
Если в процессе конфигурирования было указано, что некоторые части системы должны быть собраны в виде модулей, то для их построения используется отдельная modules.
Файлы откомпилированных модулей имеют расширение .ko и создаются в том же каталоге, что исходный код, т. е. оказываются разбросанными по всему дереву исходного кода ядра.

##### 4) Удаление артефактов сборки
Для очистки дерева исходного кода ядра предназначены три цели make:
- *clean:* удаляет объектные файлы и большинство промежуточных;
- *mproper:* удаляет все промежуточные файлы, включая .config. Эта цель применяется для возврата дерева в состояние, в котрром оно находилось сразу после клонировани репозитория или распаковки исходного кода;
- *distclean:* то же, что и mproper, но удаляет также резервные копии, созданные редакторами, файлы, оставшиеся после наложения заплат, и другие артефакты разработки. 